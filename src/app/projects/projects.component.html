<div class="container mx-auto grid grid-cols-2 lg:grid-cols-4 gap-4 p-4 px-10 xl:px-32 pb-20 content items-stretch">
  <div
    *ngFor="let project of projects; trackBy: trackByIndex"
    class="bg-white dark:bg-gray-800 rounded-[30px] p-6 flex flex-col gap-4 col-span-2 hover:shadow-lg dark:hover:shadow-xl relative"
  >
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      
      <!-- Image slider with expand icon -->
      <div class="slider-container">
        <button class="slider-btn" (click)="prevSlide(project)">&#10094;</button>
        <img 
          class="slider-image" 
          [src]="project.images[project.currentIndex]" 
          alt="Project Image"
          (click)="openImage(project.images[project.currentIndex])"
        >

        <!-- Expand (full image) icon in corner -->
        <img 
          src="assets/expand.webp" 
          alt="Expand" 
          class="expand-icon" 
          (click)="openImage(project.images[project.currentIndex])"
        >

        <button class="slider-btn" (click)="nextSlide(project)">&#10095;</button>
      </div>

      <!-- details -->
      <div class="flex flex-col">
        <h5 class="text-xl font-bold font-mono text-gray-900 dark:text-white mb-2">{{ project.name }}</h5>
        <p class="text-xs md:text-sm text-gray-700 dark:text-gray-300 mb-4">{{ project.description }}</p>

        <div class="flex gap-3 flex-wrap mt-auto">
          <ng-container *ngFor="let tech of project.tech">
            <div class="w-7 h-7 flex items-center justify-center relative group">
              <img class="w-full h-full object-contain" [src]="tech.image" [alt]="tech.name" />
              <div class="tooltip hidden group-hover:block absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-700 text-white text-xs font-semibold py-1 px-2 rounded">
                {{ tech.name }}
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>

    <!-- GitHub link -->
    <a *ngIf="project.github" [href]="project.github" target="_blank" rel="noopener noreferrer">
      <div class="action-btn">
        <!-- GitHub SVG Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" height="18" width="18" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 .5C5.65.5.5 5.65.5 12c0 5.08 3.29 9.38 7.86 10.9.58.11.79-.25.79-.56 0-.28-.01-1.02-.02-2-3.2.7-3.88-1.54-3.88-1.54-.53-1.36-1.3-1.72-1.3-1.72-1.06-.73.08-.72.08-.72 1.17.08 1.78 1.2 1.78 1.2 1.04 1.78 
          2.73 1.27 3.4.97.11-.76.41-1.27.75-1.56-2.56-.29-5.26-1.28-5.26-5.69 0-1.26.45-2.29 1.18-3.1-.12-.3-.51-1.52.11-3.17 0 0 .96-.31 3.14 1.18a10.95 10.95 0 0 1 2.86-.38c.97.01 1.95.13 2.86.38 2.18-1.5 3.14-1.18 
          3.14-1.18.62 1.65.23 2.87.11 3.17.73.81 1.18 1.84 1.18 3.1 0 4.42-2.71 5.4-5.29 5.68.42.36.8 1.08.8 2.18 0 1.57-.01 2.84-.01 3.23 0 .31.21.68.8.56C20.71 21.38 24 17.08 24 12c0-6.35-5.15-11.5-12-11.5z"/>
        </svg>
      </div> 
    </a>

    <!-- tags & date -->
    <div class="absolute bottom-4 right-4 flex items-center space-x-2">
      <span *ngIf="project.demo" class="tag demo">Demo Project</span>
      <span *ngIf="project.personal" class="tag personal">Personal</span>
      <span *ngIf="project.status; else closed" class="tag open">Open</span>
      <ng-template #closed><span class="tag closed">Closed</span></ng-template>
      <p class="text-gray-500 text-sm ml-2">{{ project.date }}</p>
    </div>
  </div>
</div>

<!-- Fullscreen Modal -->
<div class="modal" *ngIf="selectedImage" (click)="closeImage()">
  <span class="close">&times;</span>
  <img [src]="selectedImage" alt="Full Image" class="full-image" />
</div>